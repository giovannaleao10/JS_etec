<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script type="text/javascript" src="https://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=w-pMHnYXW3PwBIrjPWtABsznwa_xpwJLYzrzbTKFIjr1bg1UVhseia__Zh_bCezg750Qh_KvPsnLPuGx81_er6liKDZ27an8FscJbvgpR1rY87IPTha-mnZHHK9AsPQvr60WebwgXIYMF47IdFjMdbcMbL7q19FByqwieonNA6OeueHexFJRf0Af0eO8altUvelb2niUsywHNBbKs4Dm0ORyc3_QCQJzXjmb8EzoMv22n2PQgdMHOqvWt-GAk3LI5UuMghGLwJjhQmHymaWTnDCzTg3IFlpvfF7AAHwbQkIbwMhb2pcSdlbg0M0lD3LprHXgvfjD_tpjaMBIxfoszaaqUwGy70nKyj8PeKFolfhbkuk954Jkkio6oCNDeH7eNUMz4RuXMkKPaFytvlkZCKAANp7-qGMSCBqTlg_zNTd9DKlFqAlR2vFIA7r3YgI5P-1_Yu69i04bCEIma1KGDf5DcIdVWXTx2KAzSX_H0-0cIKFHIMBcpDpr-NWksTzDKGRh4Ejh26RS0cXWB5BuDNnl7Y498jZ4WwcT_IKTf-KSf6nCqA5sEd0vsNk_oRdCh6o0iKNrqeFpKgZWubcFVKcoYpjbTG7Mnbe-Vj8abunscVg4kSYJ5aRhK9PFfBNkKoxCd_bv2zzd-Br8ERE_pfYALqka1SCBJ2VPpW_njBzDbFpbVRlSwdTKyjQHO283f9-CPIWadlCxAb1M2UUWzXWF_zp27HlIiJ5W4idBw35t4QCSQFreWfGgQ-WlsflHsGmAmIT4P03J7YlIGV3lG8-OsJGStCHYVgCqhnvdALvtPrHwecQDKftgxI9Wz-G85KAyt_HoDe66PIwEie_DFl3eqP-I0U5oYJ3YTBITeBFbNeC-r_08y2iQhna1dMxQjBNNK6FBhR4Ro6-hEQKO-6Y-kqE8lCOVKX1nmbOF2-QJHiRmB6JIqdOEIJyGgAF2Mt-QIooFOvKN-ZnrhH4i866a2oDwn8KOyJf0FTLy626aEYa0tIPY2yGbHyH9ND4y_iBupooigdnMjNxagnnPNVPfYUxn7Z0RUCHXXpj06PHjkTN28WFegERbjmpL0RNkD4RaMvS4h-O4BEK2g-0LGo6qSttNsHxfeyrfSr94u8AVukJb_f61tNzsPrc4etsMeOM57JY2pgNBrB2CxvLGKNS8ojQAgweaSMRnxi12jWyES1jmYXvdTGpGYYBm9ER8Ks-6lpq8PDxXDyT3c4j8mhTNc08FBBJLSMVC9dnNsrtXE_emBnTldvXq2gLbqVe5ZmHIKNwmfignf8nHIQOixsRpo_MnrhKFavx9V16Gv6lHMW_wgun-qwAmBTyPUhIDM6xMvCVPrGemfRX_pkROUa7BgIrY0_neEMyKQYoYg2PFNB8tED7r7gjfNuCIxxI-RS-Eb8g7XI1STQo6NVHhpce6GrsF58uoP1EocQOFOP7ZivciViGthCHtVZqpBYzElQQWcgRwLcErdQ11WWhw83--kotaX4zgucI8N-csuWYK0YfLzNKV6Qocqhcdo-tYqd19ASIqpqHdkt_VRax-12GoMvvroAlLYqRQaqmgqser4NhL3kdURKdmKZTdTugqQnd2QVg05uD9pbsIebIHp7TLeuh5FxA3_SBzKLIVkMugHauRWEBWMdSd5jPjCG1gki4eT63s4Lro5_ClqR2Nyp0skYEfQ-1noVmoxCvVYklvnhYFmsfFfPQE1ZJ6VITBLnYGmeIsSmcRdxrmNuZg3_uST9Kxw0L4Kh2-Sjs0-t_WjOr1MdXArMwUEXex8dkf4xKLdycy2LoaMehXhQivuh7uDJYW_9lFXbz6JFo2Op95SPri4z3hGSVb_fBgZTo1" charset="UTF-8"></script><script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body class="w3-light-gray">
    <div id="app" class="w3-container w3-row">
      <div id="tipo">
        <h3>Selecione o Tipo de Veículo</h3>
        <div class="w3-third w3-mobile w3-panel">
          <div class="w3-card w3-container w3-dark-grey w3-center">
            <h4>Carro</h4>
            <i class="fas fa-car w3-jumbo w3-text-white"></i>
            <h5>Carros, pickups e utilitários</h5>
            <button class="w3-button w3-green w3-margin-bottom" @click="marcas('carros')">Selecionar</button>
          </div>
        </div>

        <div class="w3-third w3-mobile w3-panel">
          <div class="w3-card w3-container w3-dark-grey w3-center">
            <h4>Moto</h4>
            <i class="fas fa-motorcycle w3-jumbo w3-text-white"></i>
            <h5>Motos, triciclos e quadriciclos</h5>
            <button class="w3-button w3-green w3-margin-bottom" @click="marcas('motos')">Selecionar</button>
          </div>
        </div>

        <div class="w3-third w3-mobile w3-panel">
          <div class="w3-card w3-container w3-dark-grey w3-center">
            <h4>Caminhão</h4>
            <i class="fas fa-truck-moving w3-jumbo w3-text-white"></i>
            <h5>Caminhões em geral</h5>
            <button class="w3-button w3-green w3-margin-bottom" @click="marcas('caminhoes')">Selecionar</button>
          </div>
        </div>
      </div>

      <div id="marcas" v-if="tipo != null" class="w3-container w3-row">
        <h3>Selecione a Marca do Veículo</h3>

        <div v-for="m in Jmarca" class="w3-third w3-mobile w3-panel">
          <div class="w3-card w3-container w3-dark-grey w3-center">
            <h4>{{ m.nome }}</h4>
            <button class="w3-button w3-green w3-margin-bottom" @click="modelos(m.codigo)">Selecionar</button>
          </div>
        </div>
      </div>

      <div id="modelos" v-if="marca != null" class="w3-container w3-row">
        <h3>Selecione o Modelo do Veículo</h3>

        <div v-for="m in Jmodelo.modelos" class="w3-third w3-mobile w3-panel">
          <div class="w3-card w3-container w3-dark-grey w3-center">
            <h4>{{ m.nome }}</h4>
            <button class="w3-button w3-green w3-margin-bottom" @click="anos(m.codigo)">Selecionar</button>
          </div>
        </div>
      </div>

      <div id="anos" v-if="modelo != null" class="w3-container w3-row">
        <h3>Selecione o Ano do Veículo</h3>
        <div class="w3-third w3-mobile w3-panel" v-for="ano in Jano">
          <div class="w3-card w3-container w3-dark-grey w3-center">
            <h4>{{ ano.nome }}</h4>
            <button class="w3-button w3-green w3-margin-bottom" @click="valores(ano.codigo)">Selecionar</button>
          </div>
        </div>
      </div>

      <div id="valor" class="w3-modal w3-container w3-center">
        <div class="w3-modal-content w3-card w3-round w3-display-middle w3-padding">
          <div class="w3-container">
            <span @click="fecharModal" class="w3-button w3-display-topright">&times;</span>
            <div id="valor-detalhe"></div>
          </div>
          <button @click="fecharModal" class="w3-button w3-green w3-large" style="margin-top: 25px; margin-bottom: 15px;">Fechar</button>
        </div>
      </div>
    </div>

    <script>
      const app = Vue.createApp({
        data() {
          return {
            tipo: null,
            marca: null,
            modelo: null,
            ano: null,
            valor: null,
            // Salva os JSONs de retorno
            Jmarca: null,
            Jmodelo: null,
            Jano: null,
          };
        },
        methods: {
          async marcas(t) {
            const response = await fetch("https://parallelum.com.br/fipe/api/v1/" + t + "/marcas");
            this.Jmarca = await response.json();
            this.tipo = t;
          },
          async modelos(m) {
            const response = await fetch("https://parallelum.com.br/fipe/api/v1/" + this.tipo + "/marcas/" + m + "/modelos");
            this.Jmodelo = await response.json();
            this.marca = m;
          },
          async anos(a) {
            const response = await fetch("https://parallelum.com.br/fipe/api/v1/" + this.tipo + "/marcas/" + this.marca + "/modelos/" + a + "/anos");
            this.Jano = await response.json();
            this.modelo = a;
          },
          async valores(v) {
            const response = await fetch("https://parallelum.com.br/fipe/api/v1/" + this.tipo + "/marcas/" + this.marca + "/modelos/" + this.modelo + "/anos/" + v);
            const data = await response.json();
            this.valor = data;
            document.getElementById("valor-detalhe").innerHTML = `
              <table class="w3-table w3-striped w3-bordered">
                <tr><td>Marca</td><td>${data.Marca}</td></tr>
                <tr><td>Modelo</td><td>${data.Modelo}</td></tr>
                <tr><td>Ano</td><td>${data.AnoModelo}</td></tr>
                <tr><td>Valor</td><td>${data.Valor}</td></tr>
              </table>
            `;
            document.getElementById("valor").style.display = "block";
          },
          fecharModal() {
            document.getElementById("valor").style.display = "none";
          },
        },
      });

      app.mount("#app");
    </script>
  </body>
</html>